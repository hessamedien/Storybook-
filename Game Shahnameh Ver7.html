<script>
  const gameContainer = document.getElementById('game');
  const storyLog = document.getElementById('storyLog');

  const heroes = {
    'Ú¯Ø±Ø¯Ø¢ÙØ±ÛŒØ¯': {
      origin: 'Ø·Ø¨Ø±Ø³ØªØ§Ù†',
      gender: 'Ø²Ù†',
      intro: 'Ú¯Ø±Ø¯Ø¢ÙØ±ÛŒØ¯ØŒ Ø¨Ø§Ù†ÙˆÛŒ Ø¬Ù†Ú¯Ø¬ÙˆÛŒ Ø´Ù…Ø§Ù„ Ø§ÛŒØ±Ø§Ù†ØŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø¯ÙØ§Ø¹ Ø§Ø² Ø³Ø±Ø²Ù…ÛŒÙ† Ø®ÙˆØ¯ Ø§Ø³Øª...',
      branches: [
        {
          title: 'ğŸ•°ï¸ Ø³ÙØ± Ø¨Ù‡ Ú¯Ø°Ø´ØªÙ‡',
          text: 'Ú¯Ø±Ø¯Ø¢ÙØ±ÛŒØ¯ ÙˆØ§Ø±Ø¯ ØºØ§Ø±ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ø§ Ø³ÛŒÙ…Ø±Øº Ø±ÙˆØ¨Ù‡â€ŒØ±Ùˆ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯...',
          choices: ['Ù…Ø§Ù†Ø¯Ù† Ø¯Ø± Ú¯Ø°Ø´ØªÙ‡', 'Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ø§ Ø¯Ø§Ù†Ø´']
        },
        {
          title: 'â¤ï¸ Ø¹Ø´Ù‚ Ùˆ Ø®ÛŒØ§Ù†Øª',
          text: 'Ø§Ùˆ Ø¹Ø§Ø´Ù‚ Ø¨Ù‡Ø±Ø§Ù…ØŒ ÙØ±Ù…Ø§Ù†Ø¯Ù‡ Ø¯Ø´Ù…Ù† Ù…ÛŒâ€ŒØ´ÙˆØ¯...',
          choices: ['Ø®ÛŒØ§Ù†Øª Ø¨Ø±Ø§ÛŒ Ø¹Ø´Ù‚', 'ÙØ¯Ø§Ú©Ø§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ ÙˆØ·Ù†']
        },
        {
          title: 'ğŸ‘‘ Ù†Ø¬Ø§Øª Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡',
          text: 'Ú¯Ø±Ø¯Ø¢ÙØ±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù†Ø¬Ø§Øª Ø´Ø§Ù‡Ø²Ø§Ø¯Ù‡ Ø±Ø¨ÙˆØ¯Ù‡â€ŒØ´Ø¯Ù‡ Ø¨Ù‡ Ø¬Ù†Ú¯Ù„ Ø¯ÛŒÙˆÙ‡Ø§ Ù…ÛŒâ€ŒØ±ÙˆØ¯...',
          choices: ['Ù†Ø¨Ø±Ø¯ Ø¨Ø§ Ø¯ÛŒÙˆ Ø³ÙÛŒØ¯', 'Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¬Ø§Ø¯Ùˆ']
        }
      ],
      endings: [
        'ğŸ‘‘ ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù…Ù„Ú©Ù‡ Ø§ÙØ³Ø§Ù†Ù‡â€ŒØ§ÛŒ',
        'ğŸ•Šï¸ ÙØ¯Ø§Ú©Ø§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø²Ù…ÛŒÙ†',
        'ğŸŒªï¸ ØªØ¨Ø¹ÛŒØ¯ Ø¨Ù‡ Ø³Ø±Ø²Ù…ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø¯ÙˆØ±'
      ]
    },
    'Ø±Ø³ØªÙ…': {
      origin: 'Ø²Ø§Ø¨Ù„Ø³ØªØ§Ù†',
      gender: 'Ù…Ø±Ø¯',
      intro: 'Ø±Ø³ØªÙ…ØŒ Ù‚Ù‡Ø±Ù…Ø§Ù† Ø¬ÙˆØ§Ù† Ø²Ø§Ø¨Ù„ØŒ Ø¯Ø± Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ÙØªØ®Ø§Ø± Ùˆ Ù‡ÙˆÛŒØª Ø®ÙˆÛŒØ´ Ø§Ø³Øª...',
      branches: [
        {
          title: 'ğŸ•°ï¸ Ø³ÙØ± Ø¨Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡',
          text: 'Ø±Ø³ØªÙ… Ø¨Ø§ Ø³Ù†Ú¯ÛŒ Ø§Ø³Ø±Ø§Ø±Ø¢Ù…ÛŒØ² Ø¨Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡ Ø³ÙØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯...',
          choices: ['ØªØºÛŒÛŒØ± Ø¢ÛŒÙ†Ø¯Ù‡', 'Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø³Ù„']
        },
        {
          title: 'â¤ï¸ Ø¹Ø´Ù‚ Ù…Ù…Ù†ÙˆØ¹Ù‡',
          text: 'Ø±Ø³ØªÙ… Ø¹Ø§Ø´Ù‚ Ø¢Ø±Ø²ÙˆØŒ Ø¯Ø®ØªØ± Ø´ÙˆØ±Ø´ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯...',
          choices: ['Ø§Ø²Ø¯ÙˆØ§Ø¬ Ùˆ Ø§ØªØ­Ø§Ø¯', 'ØªØ±Ú© Ø¹Ø´Ù‚ Ø¨Ø±Ø§ÛŒ ÙˆÙØ§Ø¯Ø§Ø±ÛŒ']
        },
        {
          title: 'âš”ï¸ Ù†Ø¨Ø±Ø¯ Ø¨Ø§ Ø¯ÛŒÙˆ Ø²Ù…Ø§Ù†',
          text: 'Ø±Ø³ØªÙ… Ø¨Ø§ Ø¯ÛŒÙˆÛŒ Ø¨Ù‡ Ù†Ø§Ù… Ø²Ù…Ø§Ù†â€ŒØ®ÙˆØ§Ø± Ø±ÙˆØ¨Ù‡â€ŒØ±Ùˆ Ù…ÛŒâ€ŒØ´ÙˆØ¯...',
          choices: ['Ù†ÛŒØ±ÙˆÛŒ Ø³ÛŒÙ…Ø±Øº', 'Ù‚Ø±Ø¨Ø§Ù†ÛŒ Ø®Ø§Ø·Ø±Ø§Øª']
        }
      ],
      endings: [
        'ğŸ›¡ï¸ Ù‚Ù‡Ø±Ù…Ø§Ù† Ù…Ù„ÛŒ',
        'ğŸ’” Ø´Ú©Ø³Øª Ø¹Ø´Ù‚ÛŒ',
        'ğŸŒ€ Ú¯Ù…â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ø²Ù…Ø§Ù†'
      ]
    }
  };

  let currentHero = null;
  let currentBranch = 0;

  function startGame(heroName) {
    currentHero = heroes[heroName];
    currentBranch = 0;
    storyLog.textContent = `Ø´Ø±ÙˆØ¹ Ø¯Ø§Ø³ØªØ§Ù† Ø¨Ø§ ${heroName} Ø§Ø² ${currentHero.origin}\n`;
    showModal(currentHero.intro);
    setTimeout(() => showBranch(), 1000);
  }

  function showBranch() {
    if (currentBranch >= currentHero.branches.length) {
      showEndings();
      return;
    }

    const branch = currentHero.branches[currentBranch];
    gameContainer.innerHTML = `<h3>${branch.title}</h3><p>${branch.text}</p>`;
    branch.choices.forEach(choice => {
      const btn = document.createElement('div');
      btn.className = 'choice';
      btn.textContent = choice;
      btn.onclick = () => {
        storyLog.textContent += `\n${branch.title}: ${choice}\n`;
        showModal(`Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ù…Ø§: ${choice}`);
        currentBranch++;
        setTimeout(() => showBranch(), 1000);
      };
      gameContainer.appendChild(btn);
    });
  }

  function showEndings() {
    gameContainer.innerHTML = `<h3>ğŸ“œ Ù¾Ø§ÛŒØ§Ù† Ø¯Ø§Ø³ØªØ§Ù†</h3><p>Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù†ØªØ®Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù¾Ø§ÛŒØ§Ù†â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ù‚Ù… Ù…ÛŒâ€ŒØ®ÙˆØ±Ø¯:</p>`;
    currentHero.endings.forEach(end => {
      const btn = document.createElement('div');
      btn.className = 'choice';
      btn.textContent = end;
      btn.onclick = () => {
        storyLog.textContent += `\nğŸ Ù¾Ø§ÛŒØ§Ù†: ${end}\n`;
        showModal(`Ù¾Ø§ÛŒØ§Ù† Ø´Ù…Ø§: ${end}`);
        gameContainer.innerHTML = `<p>ğŸ‰ Ø¯Ø§Ø³ØªØ§Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù† Ø±Ø§ Ú†Ø§Ù¾ Ú©Ù†ÛŒØ¯.</p>`;
      };
      gameContainer.appendChild(btn);
    });
  }
</script>